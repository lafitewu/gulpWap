+function(e){"use strict";var a=function(e){for(var a=[],t=0;t<e.length;t++){var l=e[t];"请选择"!==l.name&&a.push(l.name)}return a.length?a:[""]},t=function(e){return e.sub?a(e.sub):[""]},l=function(e){for(var a=0;a<n.length;a++)if(n[a].name===e&&n[a].sub&&n[a].sub.length){var l=n[a].sub[0];if(l.sub&&l.sub.length);else if(n[a].sub[0].id!=n[a].id){var u={id:n[a].id,name:"不限",fuid:n[a].fuid};n[a].sub.unshift(u)}return t(n[a])}return[""]},u=function(e,a){for(var l=0;l<n.length;l++)if(n[l].name===e&&n[l].sub)for(var u=0;u<n[l].sub.length;u++)if(n[l].sub[u].name===a){if(n[l].sub[u].sub&&n[l].sub[u].sub.length&&n[l].sub[u].sub[0].id!=n[l].sub[u].id){var i={id:n[l].sub[u].id,name:"不限",fuid:n[l].sub[u].fuid};n[l].sub[u].sub.unshift(i)}return t(n[l].sub[u])}return[""]},n=areaData,i=function(e){var a=e.input,t=n[e.cols[0].activeIndex];if(a.attr("data-proid",t.id),a.nextAll('input[name="loc_province"]').val(t.id),t.sub&&t.sub.length){var l=t.sub[e.cols[1].activeIndex];if(l.id==t.id)a.attr("data-cityid",null),a.nextAll('input[name="loc_city"]').val(null);else if(a.attr("data-cityid",l.id),a.nextAll('input[name="loc_city"]').val(l.id),l.sub&&l.sub.length)if(0==e.cols[2].activeIndex)a.attr("data-distid",null),a.nextAll('input[name="loc_county"]').val(null);else{var u=l.sub[e.cols[2].activeIndex];a.attr("data-distid",u.id),a.nextAll('input[name="loc_county"]').val(u.id)}else a.attr("data-distid",null),a.nextAll('input[name="loc_county"]').val(null)}else a.attr("data-cityid",null),a.nextAll('input[name="loc_city"]').val(null),a.attr("data-distid",null),a.nextAll('input[name="loc_county"]').val(null)},s=function(e){for(var a=0;a<n.length;a++)if(n[a].id===e)return n[a];return[""]},r=function(e,a){for(var t=0;t<n.length;t++)if(n[t].id===e&&n[t].sub)for(var l=0;l<n[t].sub.length;l++)if(n[t].sub[l].id===a)return n[t].sub[l];return[""]},v=function(e,a,t){for(var l=0;l<n.length;l++)if(n[l].id===e&&n[l].sub)for(var u=0;u<n[l].sub.length;u++)if(n[l].sub[u].id===a&&n[l].sub[u].sub)for(var i=0;i<n[l].sub[u].sub.length;i++)if(n[l].sub[u].sub[i].id===t)return n[l].sub[u].sub[i];return[""]},c=n.map(function(e){return e.name}),o=[""];n[0].sub.unshift({id:n[0].id,name:"不限",fuid:n[0].fuid});var o=t(n[0]),d=[""];n[0].sub&&n[0].sub.length>0&&(d=u(c[0],n[0].sub[0].name));var f,b,h=c[0],p=o[0],m=d[0],g={cssClass:"city-picker",rotateEffect:!1,onChange:function(e,a,t){var n,s=e.cols[0].value;return s!==h?(clearTimeout(f),void(f=setTimeout(function(){var a=l(s);n=a[0];var t=u(s,n);e.cols[1].replaceValues(a),e.cols[2].replaceValues(t),h=s,p=n,e.updateValue()},200))):(n=e.cols[1].value,n!==p&&(e.cols[2].replaceValues(u(s,n)),p=n,e.updateValue()),i(e),void(b&&b(e)))},cols:[{textAlign:"center",values:c,cssClass:"col-province"},{textAlign:"center",values:o,cssClass:"col-city"},{textAlign:"center",values:d,cssClass:"col-district"}]};e.fn.cityPicker=function(a){return this.each(function(){if(this){var t=e('<input type="hidden" name="loc_province"><input type="hidden" name="loc_city"><input type="hidden" name="loc_county">');t.insertAfter(e(this));var n=e.extend(g,a);a.changeCallback&&(b=a.changeCallback);var i=[],c="",o="";if(e(this).data("noinit")&&(o=e(this).val(),e(this).val("")),n.value)e(this).val(n.value.join(" "));else if(e(this).val())n.value=[],e(this).val().indexOf(" ")>0?n.value=e(this).val().split(" "):n.value[0]=e(this).val();else{var d=e(this).data("value");d&&(d=d.toString(),n.value=[],d.indexOf(" ")>0?(i=d.split(" "),i[0]&&(n.value[0]=s(i[0]).name,c+=n.value[0]),i[1]&&(n.value[1]=r(i[0],i[1]).name,c+=" "+n.value[1]),i[2]&&(n.value[2]=v(i[0],i[1],i[2]).name,c+=" "+n.value[2])):(n.value[0]=s(d).name,c+=n.value[0],n.value[1]="",n.value[2]="",i[0]=d))}c&&e(this).val(c),n.value&&(n.value[0]&&(h=n.value[0],t.eq(0).val(i[0]),n.cols[1].values=l(n.value[0])),n.value[1]?(p=n.value[1],t.eq(1).val(i[1]),n.cols[2].values=u(n.value[0],n.value[1])):n.cols[2].values=u(n.value[0],n.cols[1].values[0]),n.value[2]?(m=n.value[2],t.eq(2).val(i[2])):(n.value[2]="",m=n.value[2])),e(this).picker(n),e(this).data("noinit")&&e(this).val(o)}})}}(Zepto);